<div class="cover-user-show">
  <div class="container">
    <div class="row justify-content-center">
      <% if user_signed_in? && @user == current_user %>
      <h1 class="font-weight-normal mt-5 mb-5">マイページ</h1>
      <%= @user.user_name %>
      <% else %>
      <h1 class="font-weight-normal mt-5 mb-5"><%= @user.user_name %>さんのページ</h1>
      <% end %>
    </div>
    <p class="d-flex justify-content-end">
      <% if user_signed_in? && @user == current_user %>
        <%= link_to "プロフィール編集", edit_user_path(@user), class: "btn-sm btn-success" %>
      <% end %>

      <% if current_user != @user %>
        <% if current_user.following?(@user) %>
          <%= link_to 'フォロー外す', user_relationships_path(@user.id), method: :delete, class: "btn-sm btn-danger" %>
        <% else %>
          <%= link_to 'フォローする', user_relationships_path(@user.id), method: :POST, class:"btn-sm btn-success" %>
        <% end %>
      <% end %>
    </p>
    <div class="d-flex">
      < %= image_tag @user.image.variant(resize: '300x300'), class: 'post-image' if @user.image.attached? %>
    </div>
    <div class="d-flex">
     <%= link_to follows_user_path(@user) do %>
     <h6>フォロー<%= @following_users.count %></h6>
     <% end %>&nbsp;&nbsp;
     <%= link_to followers_user_path(@user) do %>
     <h6>フォロワー<%= @follower_users.count %></h6>
     <% end %>
   </div>

    <div class="row justify-content-center">
      <% @posts.each do |post| %>
      <div class="one-post">
        <%= link_to post_path(post) do %>
        <%= image_tag post.image.variant(resize: '300x300'), class: 'post-image' if post.image.attached? %>
        <p class="caption"><%= "#{post.comments.count} コメント" %></p>
        <% end %>
      </div>
      <% end %>
    </div>
    <%= paginate @posts %>
  </div>
</div>
